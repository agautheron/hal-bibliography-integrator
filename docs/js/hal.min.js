"use strict";const e="https://api.archives-ouvertes.fr/search";const t={THESE:{icon:"fa-graduation-cap",title_en:"Thesis"},ART:{icon:"fa-newspaper",title_en:"Journal articles"},UNDEFINED:{icon:"fa-file-pen",title_en:"Preprint"},COMM:{icon:"fa-microphone",title_en:"Communications"},LECTURE:{icon:"fa-book-open",title_en:"Lectures"},SOFTWARE:{icon:"fa-microchip",title_en:"Softwares"}};var a={};const l="halMainDone",n="halArticleDone";function i(e){const t=new Event(e);document.dispatchEvent(t)}function s(e){var a=document.createElement("div");a.classList="hal-list",a.id="hal-"+e;var l=document.createElement("button");l.classList="hal-btn",l.setAttribute("data-target","#"+e),l.setAttribute("onclick","collapse(this)"),l.innerHTML="<i class='hal-icon fa-solid "+t[e].icon+"'></i>",l.innerHTML+="<a id='hal-"+e+"-card-title'>"+t[e].title_en+"</a>",l.innerHTML+="<i class='hal-icon icon-drop_down fa-solid fa-caret-down'></i>",a.appendChild(l);var n=function(e=null){var t=document.createElement("div");t.classList="hal-spinner",t.id=e;var a=document.createElement("div");a.classList="lds-ellipsis";for(let e=1;e<=4;e++)a.appendChild(document.createElement("div"));return t.appendChild(a),t}("hal-"+e+"-spinner");a.appendChild(n);var i=document.createElement("div");return i.classList="hal-content",i.id=e,i.innerHTML="<table class='hal-results-table'><tbody id='hal-"+e+"-table'></tbody></table>",a.append(i),a}function o(l,s){return async function(t,a=!1){try{const n=new URLSearchParams(t);var l=new URL(e);l.search=n.toString(),a&&console.dir(l);const i=await fetch(l);return(await i.json()).response.docs}catch(e){console.log("Error in call on HAL API on url : "+l.toString()),console.error(e)}}({q:"authIdHal_s:"+l,fl:["title_s","halId_s","citationRef_s","defenseDateY_i","journalTitle_s","authFullName_s","publicationDate_tdate","fileMain_s","thumbId_i","label_bibtex","en_keyword_s","journalIssn_s","doiId_s"],fq:"docType_s:"+s,sort:"publicationDate_tdate desc",wt:"json"}).then((e=>{a[s]=e,document.getElementById("hal-"+s+"-card-title").innerText=t[s].title_en+" ("+e.length+")";var l=document.getElementById("hal-"+s+"-table");for(const t of e){"undefined"!=typeof halDebug&&halDebug&&console.log(t);var o="";o=o+"<tr id='row-"+t.halId_s+"'>",t.thumbId_i?o+="<td class='d-sm-table-cell'><a href="+t.fileMain_s+"><div class='hal-media d-sm-block'><img src='https://thumb.ccsd.cnrs.fr/"+t.thumbId_i+"/thumb' alt='Image document'></div></a></td>":o+="<td class='d-sm-table-cell'></td>",o+="<td class='hal-title'><a href='https://hal.science/"+t.halId_s+"' target='_blank'><h3 class='title-results'>"+t.title_s[0]+"</h3>";let e=t.authFullName_s.length;for(const a of t.authFullName_s)o=o+"<a href='https://hal.science/search/?q=*&authFullName_s="+a+"' alt='Documents de l auteur' target='_blank'>"+a+"</a>",--e&&(o+=" ; ");o+="</a>",o=(o+="<br>")+"<div class='citation-results'>"+t.citationRef_s+"</div>",o+="<div class='export-result'>",t.thumbId_i&&(o=o+"<a href='"+t.fileMain_s+"' target='_blank' class='hal-export-pdf'><i class='fa-regular fa-file-pdf'></i></a>"),o=o+"<a class='hal-export-cite' onclick='copyCitation(\""+t.halId_s+"\")' title='Copy BibLatex Citation'><i class='fa-solid fa-quote-right'></i><a id='hal-copy-success' class='hal-citation-copy-success hidden'>BibLatex citation copied</a><p class='hal-biblatex-citation' id='hal-citation-biblatex-"+t.halId_s+"'>"+t.label_bibtex+"</p></a></div>",o+="</td> </tr>",l.innerHTML+=o}document.getElementById("hal-"+s+"-spinner").style.display="none",document.getElementById("hal-"+s).style.display="block",MathJax.typeset([document.getElementById(s)]),"ART"===s&&i(n)})).catch((e=>console.error(e)))}function c(e,t,a=!1){var n=document.getElementById("publi-hal-all");if(null===n)return a&&console.log("No HAL publication div on this page"),!1;a&&(console.log("Create a list of publications in "),console.log(n));var c=[];for(const a of t)n.appendChild(s(a)),c.push(o(e,a));return Promise.all(c).then((()=>{i(l)})),!0}var r,d,h;document.addEventListener("DOMContentLoaded",(r=idhal,d=publiList,h=halDebug,h=!0,"undefined"!=typeof halDebug&&halDebug?(console.log(r),console.log(d)):h=!1,void c(r,d,h)),!1);
